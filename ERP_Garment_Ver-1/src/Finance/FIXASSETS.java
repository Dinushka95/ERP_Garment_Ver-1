
package Finance;

//import Sales.*;

import MainSystem.AutoDB_Connect;
import MainSystem.AutoIdGenerator;
import MainSystem.MainWindow;
import static MainSystem.MainWindow.autoSqlQuery;
import static MainSystem.MainWindow.validation;
import com.github.lgooddatepicker.components.DatePickerSettings;
import com.sun.glass.events.KeyEvent;
import javax.swing.JOptionPane;
import net.proteanit.sql.DbUtils;


/**
 *
 * @author Dinushka
 */
public class FIXASSETS extends javax.swing.JInternalFrame {

      
       


    /**
     * Creates new form SalesDesignInquiry
     */
    public FIXASSETS() {
      
      initComponents();  
       
      
       generate_Asstid();
       generate_landid();
       generate_vehicleid();
       TableLoad();
       
        datePicker1.setDateToToday();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel11 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox<>();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        Cost = new javax.swing.JTextField();
        rate1 = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        dep1 = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jLabel9 = new javax.swing.JLabel();
        Fixass = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        accdep = new javax.swing.JTextField();
        jLabel12 = new javax.swing.JLabel();
        Assetid = new javax.swing.JTextField();
        DatePickerSettings dateSettings1 = new DatePickerSettings();
        dateSettings1.setFormatForDatesCommonEra("yyyy-MM-dd");
        dateSettings1.setFormatForDatesBeforeCommonEra("uuuu-MM-dd");
        datePicker1 = new com.github.lgooddatepicker.components.DatePicker(dateSettings1);
        ADDjButton1 = new javax.swing.JButton();
        EditjButton2 = new javax.swing.JButton();
        DeletejButton3 = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();

        setResizable(true);
        setTitle("Fix Assets");
        setMaximumSize(new java.awt.Dimension(1365, 620));
        setMinimumSize(new java.awt.Dimension(1365, 620));
        setPreferredSize(new java.awt.Dimension(1365, 620));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jTabbedPane1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N

        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel11.setLayout(null);

        jLabel6.setText("Other Fix Assets");
        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel6);
        jLabel6.setBounds(10, 0, 120, 15);

        jLabel7.setText("Fix Assets Type");
        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel7);
        jLabel7.setBounds(370, 60, 100, 30);

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Select Items", "Land And Building", "Vehicals" }));
        jComboBox1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jComboBox1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBox1ActionPerformed(evt);
            }
        });
        jPanel11.add(jComboBox1);
        jComboBox1.setBounds(480, 60, 160, 30);

        jLabel1.setText("Cost");
        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel1);
        jLabel1.setBounds(10, 110, 80, 15);

        jLabel2.setText("Depreaciation Rate");
        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel2);
        jLabel2.setBounds(10, 150, 130, 15);

        jLabel4.setText("Date");
        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel4);
        jLabel4.setBounds(10, 30, 60, 15);

        Cost.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CostActionPerformed(evt);
            }
        });
        Cost.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                CostKeyTyped(evt);
            }
        });
        jPanel11.add(Cost);
        Cost.setBounds(180, 100, 180, 30);

        rate1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                rate1KeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                rate1KeyTyped(evt);
            }
        });
        jPanel11.add(rate1);
        rate1.setBounds(180, 140, 180, 30);

        jLabel8.setText("Depreaciation ");
        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel8);
        jLabel8.setBounds(10, 190, 140, 15);

        dep1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                dep1KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                dep1KeyReleased(evt);
            }
        });
        jPanel11.add(dep1);
        dep1.setBounds(180, 180, 180, 30);

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4", "Title 5", "Title 6"
            }
        ));
        jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTable1MouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTable1);

        jPanel11.add(jScrollPane1);
        jScrollPane1.setBounds(10, 270, 810, 90);

        jLabel9.setText("Fix Asset ID");
        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel9);
        jLabel9.setBounds(10, 70, 100, 15);
        jPanel11.add(Fixass);
        Fixass.setBounds(180, 60, 180, 30);
        jPanel11.add(jLabel10);
        jLabel10.setBounds(540, 110, 90, 20);

        jLabel11.setText("Accumulate Depreciation");
        jLabel11.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel11);
        jLabel11.setBounds(10, 230, 160, 15);
        jPanel11.add(accdep);
        accdep.setBounds(180, 220, 180, 30);

        jLabel12.setText("ID");
        jLabel12.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jLabel12);
        jLabel12.setBounds(650, 60, 50, 30);
        jPanel11.add(Assetid);
        Assetid.setBounds(710, 60, 130, 30);
        jPanel11.add(datePicker1);
        datePicker1.setBounds(180, 20, 180, 30);

        ADDjButton1.setText("ADD");
        ADDjButton1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        ADDjButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ADDjButton1ActionPerformed(evt);
            }
        });
        jPanel11.add(ADDjButton1);
        ADDjButton1.setBounds(450, 240, 73, 23);

        EditjButton2.setText("EDIT");
        EditjButton2.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        EditjButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                EditjButton2ActionPerformed(evt);
            }
        });
        jPanel11.add(EditjButton2);
        EditjButton2.setBounds(530, 240, 61, 23);

        DeletejButton3.setText("DELETE");
        DeletejButton3.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        DeletejButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DeletejButton3ActionPerformed(evt);
            }
        });
        jPanel11.add(DeletejButton3);
        DeletejButton3.setBounds(610, 240, 77, 23);

        jButton1.setText("Demo");
        jButton1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jPanel11.add(jButton1);
        jButton1.setBounds(740, 240, 67, 23);

        jPanel1.add(jPanel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 0, 850, 470));

        jTabbedPane1.addTab("Fix Assets", jPanel1);

        getContentPane().add(jTabbedPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1350, 590));

        getAccessibleContext().setAccessibleName("");

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void dep1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_dep1KeyReleased
        // TODO add your handling code here:
    }//GEN-LAST:event_dep1KeyReleased

    private void dep1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_dep1KeyPressed
        // TODO add your handling code here:
    }//GEN-LAST:event_dep1KeyPressed

    private void ADDjButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ADDjButton1ActionPerformed
        // TODO add your handling code here:
        AddFIXASSETS();
        TableLoad();
        TextBoxClear();
        
    }//GEN-LAST:event_ADDjButton1ActionPerformed

    private void EditjButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_EditjButton2ActionPerformed
        // TODO add your handling code here:
        EditFIXASSETS();
        TableLoad();
        TextBoxClear();
    }//GEN-LAST:event_EditjButton2ActionPerformed

    private void DeletejButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DeletejButton3ActionPerformed
        // TODO add your handling code here:
          String Fixid = Fixass.getText();
         // String  assid = Assetid.getText();
        
        boolean x = autoSqlQuery.execute("DELETE FROM `garmentsystem`.`F_FIXASSETS`\n" +
"WHERE Fixid LIKE '"+Fixid+"';");
        
        try
        {
            if (x==true)
            {
                TextBoxClear();
                TableLoad();
                JOptionPane.showMessageDialog(null,"Successfully Deleted");
            }
        }
        catch (Exception ex){
            System.out.println(ex);
        }
        
    }//GEN-LAST:event_DeletejButton3ActionPerformed

    private void rate1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_rate1KeyReleased
        // TODO add your handling code here:
        
        
         float cst = Float.parseFloat(Cost.getText());
        
        float rate = Float.parseFloat(rate1.getText());
        
        float depreciation = cst*(rate/100);
        
        dep1.setText(Double.toString(depreciation));
        
        float acc = cst-depreciation;
        
        accdep.setText(Double.toString(acc));
        
    }//GEN-LAST:event_rate1KeyReleased

    private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable1MouseClicked
        // TODO add your handling code here:
          int row =jTable1.getSelectedRow();
        String date = jTable1.getValueAt(row,0).toString();
        String Fixid = jTable1.getValueAt(row,1).toString();
        String type = jTable1.getValueAt(row,2).toString();
        String assid = jTable1.getValueAt(row,3).toString();
        String cost = jTable1.getValueAt(row,4).toString();
         String rate = jTable1.getValueAt(row,5).toString();
        String dep = jTable1.getValueAt(row,6).toString();
         String Adep = jTable1.getValueAt(row,7).toString();
        
        datePicker1.setText(date);
         Fixass.setText(Fixid);
         jComboBox1.setSelectedItem(type);
         Assetid.setText(assid);
         Cost.setText(cost);
         rate1.setText(rate);
         dep1.setText(dep);
         accdep.setText(Adep);
    }//GEN-LAST:event_jTable1MouseClicked

    private void CostActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CostActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_CostActionPerformed

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBox1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBox1ActionPerformed

    private void CostKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_CostKeyTyped
        char c=evt.getKeyChar();
      {
          if(!(Character.isDigit(c) || (c==KeyEvent.VK_BACKSPACE) ))
          {
              evt.consume();
              JOptionPane.showMessageDialog(this,"You can't enter Characters");
          }
      }
    }//GEN-LAST:event_CostKeyTyped

    private void rate1KeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_rate1KeyTyped
        char c=evt.getKeyChar();
      {
          if(!(Character.isDigit(c) || (c==KeyEvent.VK_BACKSPACE) ))
          {
              evt.consume();
              JOptionPane.showMessageDialog(this,"You can't enter Characters");
          }
      }
    }//GEN-LAST:event_rate1KeyTyped
     private void generate_Asstid(){
    AutoIdGenerator aid = new AutoIdGenerator();
    Fixass.setText(aid.generate("ASST",Integer.toString(MainWindow.userid)));
    }
    
    private void generate_landid(){
    AutoIdGenerator aid = new AutoIdGenerator();
    Assetid.setText(aid.generate("LAN",Integer.toString(MainWindow.userid)));
    }
     private void generate_vehicleid(){
    AutoIdGenerator aid = new AutoIdGenerator();
    Assetid.setText(aid.generate("VEHI",Integer.toString(MainWindow.userid)));
    }
     public void AddFIXASSETS()
     {
          if(validation.ValidationCheck(Fixass, true, 0, '@')
        &&validation.ValidationCheck(Assetid, true,0,'@')
        &&validation.ValidationCheck(Cost, true,0,'1')
        &&validation.ValidationCheck(rate1, true,0,'1')
        &&validation.ValidationCheck(dep1, true,0,'1')
        &&validation.ValidationCheck(accdep, true,0,'1'))
          {
         String date = datePicker1.getText();
         String Fixid = Fixass.getText();
         String type = jComboBox1.getSelectedItem().toString();
         String assid = Assetid.getText();
        float cost = Float.parseFloat(Cost.getText());
         String rate = rate1.getText();
         float dep = Float.parseFloat(dep1.getText());
        float Adep = Float.parseFloat(accdep.getText() );
                 
         
         
          boolean x = autoSqlQuery.execute("INSERT INTO `garmentsystem`.`F_FIXASSETS`\n" +
"(`Date`,\n" +
"`FixAssetsID`,\n" +
"`FixAssetType`,\n" +
"`AssetID`,\n" +
"`Cost`,\n" +
"`Rate`,\n" +
"`Depreaciation`,\n" +
"`Accumulate Depreaciation`)\n" +
"VALUES\n" +
"'"+date+"',\n" +
"'"+Fixid+"',\n" +
"'"+type+"',\n" +
"'"+assid+"',\n" +
""+cost+",\n" +
"'"+rate+"',\n" +
""+dep+",\n" +
""+Adep+");");
          
             try
        {
            if(x==true)
            {
                TableLoad();
                TextBoxClear();
                JOptionPane.showMessageDialog(null,"Successfully Added");
            }
        }
        catch(Exception ex)
        {
            System.out.println(ex);
        }
     }
     }
 private void TableLoad()
    {

            AutoDB_Connect.DB_ResultSet = autoSqlQuery.executeQuery("SELECT * FROM `garmentsystem`.`F_FIXASSETS`");
            jTable1.setModel(DbUtils.resultSetToTableModel(AutoDB_Connect.DB_ResultSet));

    }
 private void  TextBoxClear()
 {
         datePicker1.setDateToToday();
         Fixass.setText("");
         jComboBox1.setSelectedIndex(0);
         Assetid.setText("");
         Cost.setText("");
         rate1.setText("");
         dep1.setText("");
         accdep.setText("");
 }
 public void  EditFIXASSETS()
 {
      if(validation.ValidationCheck(Fixass, true, 0, '@')
        &&validation.ValidationCheck(Assetid, true,0,'@')
        &&validation.ValidationCheck(Cost, true,0,'1')
        &&validation.ValidationCheck(rate1, true,0,'1')
        &&validation.ValidationCheck(dep1, true,0,'1')
        &&validation.ValidationCheck(accdep, true,0,'1'))
      {
         String date = datePicker1.getText();
         String Fixid = Fixass.getText();
         String type = jComboBox1.getSelectedItem().toString();
         String assid = Assetid.getText();
         String cost = Cost.getText();
         String rate = rate1.getText();
         String dep = dep1.getText();
         String Adep = accdep.getText();
         
           boolean x = autoSqlQuery.execute("UPDATE `garmentsystem`.`F_FIXASSETS`\n" +
"SET\n" +
"`Date` = '"+date+"',\n" +
"`FixAssetsID` = '"+Fixid+"',\n" +
"`FixAssetType` = '"+type+"',\n" +
"`AssetID` = '"+assid+"',\n" +
"`Cost` = "+cost+",\n" +
"`Rate` = '"+rate+"',\n" +
"`Depreaciation` = "+dep+",\n" +
"`Accumulate Depreaciation` = "+Adep+"\n" +
"WHERE `FixAssetsID` = '"+Fixid+"' AND `AssetID` = '"+assid+"';");
              try
        {
            if (x==true)
            {
               TextBoxClear();
               TableLoad();
               JOptionPane.showMessageDialog(null,"Successfully Updated");
            }
        }
        catch (Exception ex){
            System.out.println(ex);
        }
 }
 }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton ADDjButton1;
    private javax.swing.JTextField Assetid;
    private javax.swing.JTextField Cost;
    private javax.swing.JButton DeletejButton3;
    private javax.swing.JButton EditjButton2;
    private javax.swing.JTextField Fixass;
    private javax.swing.JTextField accdep;
    private com.github.lgooddatepicker.components.DatePicker datePicker1;
    private javax.swing.JTextField dep1;
    private javax.swing.JButton jButton1;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField rate1;
    // End of variables declaration//GEN-END:variables

 
    }

    

  

